<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">

    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content" data-select2-id="32">
        <div class="container-fluid" data-select2-id="31">


            <!-- SELECT2 EXAMPLE -->
            <div class="card card-secondary">
                <div class="card-header custome">
                    <h3 class="card-title">List of Corporate Tax Payers</h3>

                    <div *ngIf="editorRole">
                        <button type="submit" class="btn btn-primary role float-right"
                            style="font-size: 12px; padding: 5px; margin-top: -3px;"
                            (click)="addCorporate(addCorporateModal)">
                            <i class="fas fa-plus-square"></i> Add Corporate
                        </button>

                        <button type="submit" class="btn btn-primary role float-right"
                            style="font-size: 12px; padding: 5px; margin-top: -3px;"
                            (click)="uploadBulkCorporates(bulkCorporateModal)">
                            <i class="fas fa-file-upload"></i> Bulk Upload
                        </button>

                    </div>
                    <!-- <a [routerLink]="['/dashboard']" class="btn btn-primary role float-right" style="font-size: 12px; padding: 5px; margin-top: -3px;">
                        <i class="fas fa-reply-all"></i> Back
                    </a> -->
                </div>
                <!-- /.card-header -->

                <div class="card">
                    <div class="card-body">
                        <form [formGroup]="searchForm" (ngSubmit)="onSubmitSearch(searchForm.value)">
                            <div class="form-row">
                                <div class="col-12 col-sm-6 col-md-6 col-lg-2 mt-1">
                                    <input type="text" formControlName="companyName" class="form-control font-12"
                                        id="companyName" placeholder="Company Name"
                                        [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchForm.controls.companyName.errors }" />
                                    <div *ngIf="submitted &amp;&amp; searchForm.controls.companyName.errors"
                                        class="text-danger">
                                    </div>
                                </div>

                                <div class="col-12 col-sm-6 col-md-6 col-lg-2 mt-1">
                                    <input type="text" formControlName="emailAddress" class="form-control font-12"
                                        id="emailAddress" placeholder="Email Address"
                                        [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchForm.controls.emailAddress.errors }" />
                                    <div *ngIf="submitted &amp;&amp; searchForm.controls.emailAddress.errors"
                                        class="text-danger">
                                        <div *ngIf="searchForm.controls.emailAddress.errors.pattern">Email Address must
                                            be a valid email
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 col-sm-6 col-md-6 col-lg-2 mt-1">
                                    <select type="text" name="registeredFromId" formControlName="registeredFromId"
                                        id="registeredFromId" class="form-control font-12"
                                        [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchForm.controls.registeredFromId.errors }">
                                        <option value="">Registered From</option>
                                        <option value="1">Self Service Portal</option>
                                        <option value="2">Admin Portal</option>
                                    </select>
                                </div>

                                <div class="col-12 col-sm-6 col-md-6 col-lg-2 mt-1">
                                    <select type="text" name="industrySectorId" formControlName="industrySectorId"
                                        id="industrySectorId" class="form-control font-12"
                                        [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchForm.controls.industrySectorId.errors }">
                                        <option value="">Select Industry Sector</option>
                                        <option *ngFor="let industrySector of industrySectors"
                                            [value]="industrySector.id">
                                            {{ industrySector.name }}
                                        </option>
                                    </select>
                                </div>

                                <div *ngIf="roleID == 1" class="col-12 col-sm-6 col-md-6 col-lg-2 mt-1">
                                    <select type="text" name="taxOfficeId" formControlName="taxOfficeId"
                                        id="taxOfficeId" class="form-control font-12"
                                        [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchForm.controls.taxOfficeId.errors }">
                                        <option value="">Select Tax Office</option>
                                        <option *ngFor="let taxOffice of taxTaxOffices" [value]="taxOffice.id">
                                            {{ taxOffice.name }}
                                        </option>
                                    </select>
                                </div>

                                <div class="col-12 col-sm-6 col-md-6 col-lg-3 mt-1">
                                    <button type="submit" class="btn btn-primary font-12"><i class="fas fa-search"></i>
                                        Search</button>
                                    <button type="button" class="btn btn-primary font-12" style="margin-left: 10px;"
                                        (click)="clearSearch()"><i class="fas fa-sync-alt"></i> Clear</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card-body">
                    <div class="col-auto mbm-30">
                        <div *ngIf="corporatesData">
                            <div class="show-record">
                                Show &nbsp;
                                <select class="custom-select custom-select-sm form-control form-control-sm"
                                    (change)="setItemsPerPage(page.value)" #page>
                                    <option [selected]="currentPageLength==10">10</option>
                                    <option [selected]="currentPageLength==30">30</option>
                                    <option [selected]="currentPageLength==50">50</option>
                                    <option [selected]="currentPageLength==100">100</option>
                                    <option [selected]="currentPageLength==500">500</option>
                                    <option [selected]="currentPageLength==1000">1000</option>
                                </select>
                                &nbsp; entries
                            </div>
                        </div>
                    </div>

                    <!-- <div> -->
                    <div class="table-responsive">
                        <table
                            class="table table-bordered table-condensed table-responsive-sm table-responsive-md table-responsive-lg table-responsive-xl"
                            *ngIf="corporatesData; else content" datatable [dtOptions]="dtOptions">
                            <thead>
                                <tr>
                                    <th>S/N</th>
                                    <th>Company Name</th>
                                    <th>Email</th>

                                    <th *ngIf="showTaxOffice">Tax Office</th>
                                    <th>Tax Payer ID</th>
                                    <th>Industry Sector</th>
                                    <th>Email Provided?</th>
                                    <th>Registered On</th>
                                    <th>Registered From</th>
                                    <th>View</th>
                                    <th *ngIf="showEditCorporate">Edit</th>
                                    <th *ngIf="showEditCorporate">Verify Email</th>
                                    <th *ngIf="showEditCorporate">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let mydata of corporatesData | paginate: config; index as i">
                                    <td>{{config.itemsPerPage * (config.currentPage - 1) + i + 1}}</td>
                                    <td>{{ mydata.company_name | titlecase }}</td>
                                    <td>{{ mydata.email }}</td>

                                    <td *ngIf="showTaxOffice">{{ mydata.tax_office.name | titlecase }}</td>

                                    <td>{{ mydata.taxpayer_id }}</td>
                                    <td>{{ getIndustrySectorById(mydata.industry_sector_id) }}</td>

                                    <td>
                                        <p *ngIf="mydata.has_valid_email, else noEmail" class="text-success"> Yes </p>
                                        <ng-template #noEmail>
                                            <p class="text-danger"> No </p>
                                        </ng-template>
                                    </td>

                                    <td>{{ mydata.created_at | date:'dd MMM yyyy' }}</td>

                                    <td>{{ mydata.created_by_app_id == 1 ? "Self Service Portal" : "Admin Portal" }}
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-outline-primary"
                                            (click)="viewCorporate(mymodal, mydata)"><i class="nav-icon fas fa-eye"></i>
                                            View
                                        </button>
                                    </td>

                                    <td *ngIf="showEditCorporate">
                                        <button class="btn btn-sm btn-outline-primary"
                                            (click)="editCorporate(mymodal, mydata)"><i
                                                class="nav-icon fas fa-edit"></i>
                                            Edit</button>
                                    </td>

                                    <td *ngIf="showEditCorporate">
                                        <button *ngIf="mydata.has_valid_email == 1"
                                            class="btn btn-sm btn-outline-success"
                                            [disabled]="mydata.has_valid_email == 1"
                                            (click)="updateCorporateEmail(corporatemodal, mydata)">
                                            <i class="nav-icon fas fa-check-circle"></i> Email Provided</button>

                                        <button *ngIf="mydata.has_valid_email == 0"
                                            class="btn btn-sm btn-outline-danger"
                                            [disabled]="mydata.has_valid_email == 1"
                                            (click)="updateCorporateEmail(corporatemodal, mydata)">
                                            <i class="nav-icon fas fa-check-circle"></i> Provide Email</button>
                                    </td>

                                    <td *ngIf="showEditCorporate">
                                        <button *ngIf="mydata.active_status == 'active'"
                                            class="btn btn-sm btn-outline-success" style="width: 85px !important;"
                                            (click)="toggleStatus(mydata)">
                                            <i class="nav-icon fas fa-arrow-circle-up"></i> <br/>Active</button>
                                        
                                        <button *ngIf="mydata.active_status == 'inactive'"
                                            class="btn btn-sm btn-outline-danger" style="width: 85px !important;"
                                            (click)="toggleStatus(mydata)">
                                            <i class="nav-icon fas fa-arrow-circle-down"></i> <br/>Inactive</button>
                                    </td>
                                </tr> 
                            </tbody>
                        </table>
                    </div>
                    <div id="page_info" class="mt-3 record-show-text-bottom" *ngIf="corporatesData">
                        Showing {{(config.currentPage-1) * config.itemsPerPage + 1}} - {{config.currentPage *
                        config.itemsPerPage}} &nbsp;
                        of &nbsp;{{ config.totalItems }} &nbsp; entries
                    </div>

                    <div class="pagination paging-pull-right" *ngIf="corporatesData">
                        <pagination-controls (pageChange)="pageChange($event)"
                            class="my-pagination mt-2 pagination-server">
                        </pagination-controls>
                    </div>

                    <ng-template #content>
                        <p style="color: red;"> </p>
                    </ng-template>
                    <!-- </div> -->

                </div>
                <!-- /.card-body -->
                <div class="card-footer">

                </div>
            </div>

        </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
</div>


<ng-template #mymodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{ corporateTitle }}</h4>
    
        <div *ngIf="showLinkedAssetButton">
            <button type="button" class="btn btn button-login float-right" style="margin: 10px 0px;"
                (click)="showLinkAssetModal(linkassetmodal)">Link Asset</button>
        </div>    
    </div>

    <div class="modal-body">
        <div class="container">
            <div class="container">
                <div>
                    <ul *ngIf="showOtherTabs" class="nav nav-tabs tabbing">
                        <li (click)="showFooterNote()"><a data-toggle="tab" href="#taxpayerdetails"
                                class="active">Taxpayer Details</a></li>
                        <li (click)="hideFooterNote(true)"><a data-toggle="tab" href="#linkedassets">Linked Assets</a></li>
                        <li (click)="hideFooterNote(false)"><a data-toggle="tab" href="#assessments">Assessments</a></li>
                        <li (click)="hideFooterNote(false)"><a data-toggle="tab" href="#wallet">Wallet</a></li>
                        <!-- <li><a data-toggle="tab" href="#penalties">Penalties</a></li>
                        <li><a data-toggle="tab" href="#action">Action</a></li> -->
                    </ul>
                </div>
            </div>

            <div class="tab-content">
                <div id="taxpayerdetails" class="tab-pane fade in active mt-3">
                    <div class="container-fluid">
                        <div class="">
                            <div class="form-row">
                                <div class="col-md-12">

                                </div>
                            </div>

                            <form [formGroup]="corporateForm" (ngSubmit)="onSubmitCorporate(corporateForm.value)">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="companyName" class="input-label pull-left">Company Name<sup
                                                class=" font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <input type="text" formControlName="companyName" class="form-control"
                                            id="companyName" placeholder="Company Name"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.companyName.errors }" />

                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.companyName.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.companyName.errors.required">Company Name
                                                is required
                                            </div>
                                            <div *ngIf="corporateForm.controls.companyName.errors.pattern">Only
                                                Alphanumeric Characters
                                                allowed</div>
                                            <div *ngIf="corporateForm.controls.companyName.errors.maxlength">Company
                                                Name can not exceed
                                                60 characters</div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="cacNumber" class="input-label pull-left">CAC Registration Number
                                            <span class="note-color">**</span>
                                        </label>
                                        <input type="text" formControlName="cacRegNumber" class="form-control"
                                            (keyup)="changeCacTinPhoneStatus()" id="cacRegNumber"
                                            placeholder="Enter CAC No. Eg: EX123456" maxlength="8"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.cacRegNumber.errors || submitted &amp;&amp; validateCacTin }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.cacRegNumber.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.cacRegNumber.errors.maxlength">CAC
                                                Registration number
                                                can not exceed 8 characters</div>
                                            <div *ngIf="corporateForm.controls.cacRegNumber.errors.pattern">Valid CAC
                                                Registration
                                                number required</div>
                                        </div>
                                        <div *ngIf="submitted &amp;&amp; validateCacTin" class="text-danger">
                                            <div>CAC Number or Company JTB-TIN is required</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="companyTIN" class="input-label pull-left">Company JTB-TIN <span
                                                class="note-color">**</span>
                                        </label>
                                        <input type="text" formControlName="companyTIN" class="form-control"
                                            id="companyTIN" placeholder="Company JTB-TIN" maxlength="10"
                                            (keyup)="changeCacTinPhoneStatus()"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.companyTIN.errors || submitted &amp;&amp; validateCacTin }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.companyTIN.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.companyTIN.errors.pattern">Company
                                                JTB-TIN
                                                accepts only
                                                numeric value</div>
                                            <div *ngIf="corporateForm.controls.companyTIN.errors.maxlength">Company
                                                JTB-TIN
                                                can not exceed
                                                10 characters</div>
                                            <div *ngIf="corporateForm.controls.companyTIN.errors.minlength">Company
                                                JTB-TIN
                                                must be at least
                                                10 characters</div>
                                        </div>
                                        <div *ngIf="submitted &amp;&amp; validateCacTin" class="text-danger">
                                            <div>CAC Number or Company JTB-TIN is required</div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="Phone1" class="input-label pull-left">Primary Phone Number<sup
                                                class="font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <input type="text" formControlName="phone" class="form-control" id="phone"
                                            maxlength="11" placeholder="Primary Phone Number"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.phone.errors }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.phone.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.phone.errors.required">Primary Phone
                                                Number is required
                                            </div>
                                            <div *ngIf="corporateForm.controls.phone.errors.maxlength">Primary Phone
                                                Number must not
                                                exceed 11
                                                digits</div>
                                            <div *ngIf="corporateForm.controls.phone.errors.minlength">Primary Phone
                                                Number must be 11
                                                digits</div>
                                            <div *ngIf="corporateForm.controls.phone.errors.pattern">Primary Phone
                                                Number must be Number
                                                Only</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="phone2" class="input-label pull-left">Secondary Phone Number<sup
                                                class="font-wegiht-bold text-danger"></sup>
                                        </label>
                                        <input type="text" formControlName="phone2" class="form-control" id="phone2"
                                            maxlength="11" placeholder="Secondary Phone Number"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.phone2.errors }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.phone2.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.phone2.errors.maxlength">Secondary Phone
                                                Number must not
                                                exceed
                                                11 digits</div>
                                            <div *ngIf="corporateForm.controls.phone2.errors.minlength">Secondary Phone
                                                Number must be
                                                11 digits</div>
                                            <div *ngIf="corporateForm.controls.phone2.errors.pattern">Secondary Phone
                                                Number must be
                                                Number Only</div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="emailAddress1" class="input-label pull-left">
                                            Primary Email Address
                                        </label>
                                        <input type="text" formControlName="emailAddress" class="form-control"
                                            id="emailAddress" placeholder="Primary Email Address"
                                            [attr.disabled]="disableCorporateFormControl || isEmailVerified"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.emailAddress.errors }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.emailAddress.errors"
                                            class="text-danger">
                                            <!-- <div *ngIf="corporateForm.controls.emailAddress.errors.required">Email is required</div> -->
                                            <div *ngIf="corporateForm.controls.emailAddress.errors.pattern">Primary
                                                Email Address must
                                                be a valid email
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="emailAddress2" class="input-label pull-left">Secondary Email
                                            Address<sup class=" font-wegiht-bold text-danger"></sup>
                                        </label>
                                        <input type="text" formControlName="emailAddress2" class="form-control"
                                            id="emailAddress2" placeholder="Secondary Email Address"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.emailAddress2.errors }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.emailAddress2.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.emailAddress2.errors.pattern">Secondary
                                                Email Address
                                                must be a valid email
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="taxOfficeId" class="input-label pull-left">Preferred Tax
                                            Office<sup class=" font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <select type="text" name="taxOfficeId" formControlName="taxOfficeId"
                                            id="taxOfficeId" class="form-control" style="min-width:339px"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.taxOfficeId.errors }">
                                            <option value="">Select Tax Office</option>
                                            <option *ngFor="let taxTaxOffice of taxTaxOffices"
                                                [value]="taxTaxOffice.id">
                                                {{ taxTaxOffice.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.taxOfficeId.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.taxOfficeId.errors.required">Preferred
                                                Tax Office is
                                                required</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="industrySectorId" class="input-label pull-left">Industry Sector<sup
                                                class=" font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <select type="text" name="industrySectorId" formControlName="industrySectorId"
                                            id="industrySectorId" class="form-control" style="min-width:339px"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.industrySectorId.errors }">
                                            <option value="">Select Industry Sector</option>
                                            <option *ngFor="let industrySector of industrySectors"
                                                [value]="industrySector.id">
                                                {{ industrySector.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.industrySectorId.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.industrySectorId.errors.required">
                                                Industry Sector is
                                                required
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="parentCompanyTaxPayerId">Parent Company Taxpayer ID</label>
                                        <input type="text" formControlName="parentCompanyTaxPayerId"
                                            class="form-control" placeholder="Parent Company Taxpayer ID" maxlength="11"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.parentCompanyTaxPayerId.errors }" />
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.parentCompanyTaxPayerId.errors"
                                            class="text-danger">
                                            <div
                                                *ngIf="corporateForm.controls.parentCompanyTaxPayerId.errors.minlength">
                                                Parent Company Taxpayer ID must be at least 11 characters long.</div>
                                            <div
                                                *ngIf="corporateForm.controls.parentCompanyTaxPayerId.errors.maxlength">
                                                Parent Company Taxpayer ID must be at most 11 characters long.</div>
                                            <div *ngIf="corporateForm.controls.parentCompanyTaxPayerId.errors.pattern">
                                                Parent Company Taxpayer ID must begin with 3 alphabets</div>
                                        </div>
                                    </div>

                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="companyTypeId" class="input-label pull-left">Company Type<sup
                                                class=" font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <select type="text" name="companyTypeId" formControlName="companyTypeId"
                                            id="companyTypeId" class="form-control" style="min-width:339px"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.companyTypeId.errors }">
                                            <option value="">Select Company Type</option>
                                            <option *ngFor="let companyType of companyTypes" [value]="companyType.id">
                                                {{ companyType.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.companyTypeId.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.companyTypeId.errors.required">Company
                                                Type is
                                                required</div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="localGovernmentId" class="input-label pull-left">Local
                                            Government<sup class=" font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <select type="text" name="localGovernmentId" formControlName="localGovernmentId"
                                            id="localGovernmentId" class="form-control" style="min-width:339px"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.localGovernmentId.errors }">
                                            <option value="">Select Local Government</option>
                                            <option *ngFor="let stateLocalGovt of stateLocalGovts"
                                                [value]="stateLocalGovt.lga_code">
                                                {{ stateLocalGovt.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.localGovernmentId.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.localGovernmentId.errors.required">Local
                                                Government is
                                                required</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="contactAddress" class="input-label pull-left ">Contact Address<sup
                                                class="font-wegiht-bold text-danger">*</sup>
                                        </label>
                                        <textarea formControlName="contactAddress" class="form-control"
                                            id="contactAddress" rows="3" placeholder="Contact Address"
                                            [attr.disabled]="disableCorporateFormControl"
                                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; corporateForm.controls.contactAddress.errors }"></textarea>
                                        <div *ngIf="submitted &amp;&amp; corporateForm.controls.contactAddress.errors"
                                            class="text-danger">
                                            <div *ngIf="corporateForm.controls.contactAddress.errors.required">Contact
                                                Address is
                                                required</div>
                                            <div *ngIf="corporateForm.controls.contactAddress.errors.pattern">Only
                                                Alphanumeric
                                                Characters
                                                allowed</div>
                                            <div *ngIf="corporateForm.controls.contactAddress.errors.minlength">Contact
                                                Address cannot
                                                contain less than 6 characters</div>
                                            <div *ngIf="corporateForm.controls.contactAddress.errors.maxlength">Contact
                                                Address cannot
                                                contain more than 200 characters</div>
                                        </div>
                                    </div>

                                </div>

                                <button *ngIf="showUpdateCorporate" type="submit" class="btn btn button-login">
                                    <i class="far fa-save"></i> Update Corporate</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="linkedassets" class="tab-pane fade mt-3" style="min-height: 500px;">
                    <div class="container-fluid">
                        <div class="">
                            <table class="table table-bordered table-condensed" *ngIf="linkedAssetData; else content"
                                datatable [dtOptions]="dtOptionsPopUp" width="100%">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Asset Type</th>
                                        <th>Asset Name</th>
                                        <th>Asset ID</th>
                                        <th>Role</th>
                                        <th>View Asset</th>
                                        <th>Unlink Asset</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let linkedAsset of linkedAssetData; index as i">
                                        <th>{{i + 1}}</th>
                                        <td>{{ linkedAsset.asset_type_name }}</td>
                                        <td>{{ linkedAsset.asset_name }}</td>
                                        <td>{{ linkedAsset.asset_id }}</td>
                                        <!-- <td>{{ linkedAsset.asset_type_name == "Business" ? linkedAsset.business_name : linkedAsset.asset_type_name == "Building" ? linkedAsset.building_name : linkedAsset.land_name }}</td> -->
                                        <td>{{ linkedAsset.role_name }}</td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary" (click)="viewAsset(linkedAsset, viewassetmodal)">
                                            <i class="nav-icon fas fa-eye"></i> View Asset</button>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary" (click)="unlinkAsset(linkedAsset)">
                                                <i class="nav-icon fas fa-unlink"></i> Unlink Asset</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            
                        </div>
                    </div>
                </div>

                <div id="assessments" class="tab-pane fade mt-3" style="min-height: 500px;">
                    <div class="container-fluid">
                        <div>
                            <div class="modal-header">
                                <h4 class="modal-title" id="modal-basic-title">PAYE Assessment</h4>

                                <div *ngIf="managerRole || editorRole">
                                    <button type="button" class="btn btn button-login float-right" style="margin: 10px 10px;"
                                        (click)="generatePayeAssessment()">Generate Assessment</button>
                                </div>
                            </div>
                        
                            <div class="modal-body">
                                <table class="table table-bordered font-12" *ngIf="payeAssessmentData; else content" datatable
                                    [dtOptions]="dtOptionsPopUp" width="100%">
                                    <thead>
                                        <tr>
                                            <th>S/N</th>
                                            <th>Date Generated</th>
                                            <th>Generated From</th>
                                            <th>Invoice ID</th>
                                            <th>Tax Year</th>
                                            <th>Tax Month</th>
                                            <th>Employees Count</th>
                                            <th>Total Monthly Tax</th>
                                            <th>Amount Paid</th>
                                            <th>Balance</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let mydata of payeAssessmentData; index as i">
                                            <th>{{i + 1}}</th>
                                            <td>{{ mydata.created_at | date: "dd MMM yyyy" }}</td>
                                            <td>{{ mydata.application_id == 1 ? "Self Service Portal" : mydata.application_id == 2 ? "Admin Portal" : "Direct Assessment" }}</td>
                                            <td>{{ mydata.invoice_number == null ? 'N/A' : mydata.invoice_number }}</td>
                                            <td>{{ getTaxYear(mydata.due_date) }}</td>
                                            <td>{{ getTaxMonth(mydata.due_date) }}</td>
                                            <td>{{ mydata.employees_count | number }}</td>
                                            <td>{{ mydata.monthly_tax_due | number }}</td>
                                            <td>{{ mydata.amount_paid == null ? '0' : mydata.amount_paid | number}}</td>
                                            <td>{{ mydata.monthly_tax_due - mydata.amount_paid | number }}</td>
                                            
                                            <td *ngIf="mydata.payment_status == 0"><span class="text-danger"
                                                style="font-weight: 600;">Unsettled</span></td>
                                            <td *ngIf="mydata.payment_status == 1"><span class="text-success"
                                                style="font-weight: 600;">Settled</span></td>
                                            <td *ngIf="mydata.payment_status == null"><span class="text-warning" style="font-weight: 600;">No
                                                invoice</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div>
                            <div class="modal-header">
                                <h4 class="modal-title" id="modal-basic-title">With Holding Assessment</h4>

                                <div *ngIf="managerRole || editorRole">
                                    <button type="button" class="btn btn button-login float-right" style="margin: 10px 10px;"
                                        (click)="showCreateAssessmentModal(createassetmodal)">Generate Assessment</button>
                                </div>
                            </div>
                        
                            <div class="modal-body">
                                <table class="table table-bordered font-12" *ngIf="whtAssessmentsData; else content" datatable
                                    [dtOptions]="dtOptionsPopUp" width="100%">
                                    <thead>
                                        <tr>
                                            <th>S/N</th>
                                            <th>Date Generated</th>
                                            <th>Generated From</th>
                                            <th>Invoice ID</th>
                                            <!-- <th>Collector's Name</th> -->
                                            <th>Tax Due(₦)</th>
                                            <th>Amount Paid(₦)</th>
                                            <th>Balance(₦)</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let mydata of whtAssessmentsData; index as i">
                                            <th>{{i + 1}}</th>
                                            <td>{{ mydata.date_generated | date }}</td>
                                            <td>{{ mydata.generated_from }}</td>
                                            <td>{{ mydata.invoice_number == null ? 'N/A' : mydata.invoice_number }}</td>
                                            <!-- <td>{{ mydata.corporate_collector_name == null ? mydata.individual_collector_first_name + " " + mydata.individual_collector_surname : mydata.corporate_collector_name }}</td> -->
                                            <td>{{ mydata.tax_due | number }}</td>
                                            <td>{{ mydata.amount_paid == null ? '0' : mydata.amount_paid | number}}</td>
                                            <td>{{ mydata.tax_due - mydata.amount_paid | number }}</td>
        
                                            <td *ngIf="mydata.payment_status != 1"><span class="text-danger"
                                                    style="font-weight: 600;">Unsettled</span></td>
                                            <td *ngIf="mydata.payment_status == 1"><span class="text-success"
                                                    style="font-weight: 600;">Settled</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div>
                            <div class="modal-header">
                                <h4 class="modal-title" id="modal-basic-title">Business Premise Assessment</h4>

                                <div *ngIf="managerRole || editorRole">
                                    <button type="button" class="btn btn button-login float-right" style="margin: 10px 10px;"
                                        (click)="showCreateAssessmentModal(createassetmodal)">Generate Assessment</button>
                                </div>
                            </div>
                        
                            <div class="modal-body">
                                <table class="table table-bordered font-12" *ngIf="assessmentData; else content" datatable
                                    [dtOptions]="dtOptionsPopUp" width="100%">
                                    <thead>
                                        <tr>
                                            <th>S/N</th>
                                            <th>Date Generated</th>
                                            <th>Generated From</th>
                                            <th>Invoice ID</th>
                                            <th>Tax Year</th>
                                            <th>Tax Month</th>
                                            <th>Employees Count</th>
                                            <th>Total Monthly Tax</th>
                                            <th>Amount Paid</th>
                                            <th>Balance</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let assessment of assessmentData; index as i">
                                            <th>{{i + 1}}</th>
                                            <td>{{ assessment.company_name == null ? 'N/A' : assessment.company_name }}</td>
                                            <td>{{ assessment.employee_count == null ? 'N/A' : assessment.employee_count }}
                                            </td>
                                            <td>{{ assessment.industry_sector == null ? 'N/A' : assessment.industry_sector }}
                                            </td>
                                            <td>{{ assessment.taxpayer_id == null ? 'N/A' : assessment.taxpayer_id }}</td>
                                            <td>{{ assessment.created_at == null ? 'N/A' : assessment.created_at | date: "dd MMM yyyy" }}
                                            </td>
                                            <td>{{ assessment.company_name == null ? 'N/A' : assessment.company_name }}</td>
                                            <td>{{ assessment.employee_count == null ? 'N/A' : assessment.employee_count }}
                                            </td>
                                            <td>{{ assessment.industry_sector == null ? 'N/A' : assessment.industry_sector }}
                                            </td>
                                            <td>{{ assessment.taxpayer_id == null ? 'N/A' : assessment.taxpayer_id }}</td>
                                            <td>{{ assessment.taxpayer_id == null ? 'N/A' : assessment.taxpayer_id }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="wallet" class="tab-pane fade mt-3" style="min-height: 500px;">
                    <div class="container-fluid">
                        <div class="">
                            <app-wallet [corporateId]="selectedCorporateId"></app-wallet> 
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="modal-footer-1">
        <div class="note-1 float-left">
            <span *ngIf="showFootNote">
                <strong>** Note:</strong> This field is required as either CAC Number or JBT-TIN Number or you can provide all to proceed further.
            </span>
        </div>

        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #corporatemodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Corporate Details</h4>
    </div>

    <div class="modal-body">
        <div class="container">

            <div class="form-row">
                <div class="col-md-12">
                </div>
            </div>

            <form [formGroup]="updateCorporateForm" (ngSubmit)="onSubmitUpdateCorporate(updateCorporateForm.value)">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="companyName" class="input-label pull-left">Company Name<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="companyName" class="form-control" id="companyName"
                            placeholder="Company Name" [attr.disabled]="true"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; updateCorporateForm.controls.companyName.errors }" />

                        <div *ngIf="submitted &amp;&amp; updateCorporateForm.controls.companyName.errors"
                            class="text-danger">
                            <div *ngIf="updateCorporateForm.controls.companyName.errors.required">Company Name is
                                required
                            </div>
                            <div *ngIf="updateCorporateForm.controls.companyName.errors.pattern">Only Alphanumeric
                                Characters
                                allowed</div>
                            <div *ngIf="updateCorporateForm.controls.companyName.errors.maxlength">Company Name can not
                                exceed
                                60 characters</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="Phone1" class="input-label pull-left">Primary Phone Number<sup
                                class="font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="phone" class="form-control" id="phone" maxlength="11"
                            [attr.disabled]="true" placeholder="Primary Phone Number"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; updateCorporateForm.controls.phone.errors }" />
                        <div *ngIf="submitted &amp;&amp; updateCorporateForm.controls.phone.errors" class="text-danger">
                            <div *ngIf="updateCorporateForm.controls.phone.errors.required">Primary Phone Number is
                                required
                            </div>
                            <div *ngIf="updateCorporateForm.controls.phone.errors.maxlength">Primary Phone Number must
                                not exceed 11 digits</div>
                            <div *ngIf="updateCorporateForm.controls.phone.errors.minlength">Primary Phone Number must
                                be 11 digits</div>
                            <div *ngIf="updateCorporateForm.controls.phone.errors.pattern">Primary Phone Number must be
                                Number
                                Only</div>
                        </div>
                    </div>

                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="emailAddress" class="input-label pull-left">
                            Primary Email Address
                        </label>
                        <input type="text" formControlName="emailAddress" class="form-control" id="emailAddress"
                            placeholder="Primary Email Address"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; updateCorporateForm.controls.emailAddress.errors }" />
                        <div *ngIf="submitted &amp;&amp; updateCorporateForm.controls.emailAddress.errors"
                            class="text-danger">
                            <!-- <div *ngIf="corporateForm.controls.emailAddress.errors.required">Email is required</div> -->
                            <div *ngIf="updateCorporateForm.controls.emailAddress.errors.pattern">Primary Email Address
                                must be a valid email</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="emailAddress1" class="input-label pull-left">Preferred Tax Office<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select type="text" name="taxOfficeId" formControlName="taxOfficeId" id="taxOfficeId"
                            [attr.disabled]="true" class="form-control" style="min-width:339px"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; updateCorporateForm.controls.taxOfficeId.errors }">
                            <option value="">Select Tax Office</option>
                            <option *ngFor="let taxTaxOffice of taxTaxOffices" [value]="taxTaxOffice.id">
                                {{ taxTaxOffice.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; updateCorporateForm.controls.taxOfficeId.errors"
                            class="text-danger">
                            <div *ngIf="updateCorporateForm.controls.taxOfficeId.errors.required">Preferred Tax Office
                                is
                                required</div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn button-login">
                    <i class="far fa-save"></i> Update Corporate
                </button>

            </form>

        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #addCorporateModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Add New Corporate</h4>
    </div>

    <div class="modal-body">
        <div class="container">

            <div class="form-row">
                <div class="col-md-12">
                </div>
            </div>

            <form [formGroup]="addCorporateForm" (ngSubmit)="onSubmitAddCorporate(addCorporateForm.value)">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="companyName" class="input-label pull-left">Company Name<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="companyName" class="form-control" id="companyName"
                            placeholder="Company Name"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.companyName.errors }" />

                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.companyName.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.companyName.errors.required">Company Name is required
                            </div>
                            <div *ngIf="addCorporateForm.controls.companyName.errors.pattern">Only Alphanumeric
                                Characters
                                allowed</div>
                            <div *ngIf="addCorporateForm.controls.companyName.errors.maxlength">Company Name can not
                                exceed
                                60 characters</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="cacNumber" class="input-label pull-left">CAC Registration Number
                            <span class="note-color">**</span></label>
                        <input type="text" formControlName="cacRegNumber" class="form-control" id="cacRegNumber"
                            placeholder="Enter CAC No. Eg: EX123456" maxlength="8" (keyup)="changeCacTinPhoneStatus()"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.cacRegNumber.errors || submitted &amp;&amp; validateCacTin }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.cacRegNumber.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.cacRegNumber.errors.maxlength">CAC Registration number
                                can not exceed 8 characters</div>
                            <div *ngIf="addCorporateForm.controls.cacRegNumber.errors.pattern">Valid CAC Registration
                                number required</div>
                        </div>
                        <div *ngIf="submitted &amp;&amp; validateCacTin" class="text-danger">
                            <div>CAC Number or Company JTB-TIN or is required</div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="companyTIN" class="input-label pull-left">Company JTB-TIN <span
                                class="note-color">**</span>
                        </label>
                        <input type="text" formControlName="companyTIN" class="form-control" id="companyTIN"
                            placeholder="Company JTB-TIN" maxlength="10" (keyup)="changeCacTinPhoneStatus()"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.companyTIN.errors || submitted &amp;&amp; validateCacTin }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.companyTIN.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.companyTIN.errors.pattern">Company JTB-TIN accepts
                                only
                                numeric value</div>
                            <div *ngIf="addCorporateForm.controls.companyTIN.errors.maxlength">Company JTB-TIN can not
                                exceed 10 characters</div>
                            <div *ngIf="addCorporateForm.controls.companyTIN.errors.minlength">Company JTB-TIN must be
                                at
                                least 10 characters</div>
                        </div>
                        <div *ngIf="submitted &amp;&amp; validateCacTin" class="text-danger">
                            <div>CAC Number or Company JTB-TIN is required</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="Phone1" class="input-label pull-left">Primary Phone Number<sup
                                style="font-weight: 800;" class="font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="phone" class="form-control" id="phone"
                            placeholder="Primary Phone Number" maxlength="11"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.phone.errors }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.phone.errors" class="text-danger">
                            <div *ngIf="addCorporateForm.controls.phone.errors.required">Primary Phone Number is
                                required
                            </div>
                            <div *ngIf="addCorporateForm.controls.phone.errors.maxlength">Primary Phone Number must not
                                exceed 11
                                digits</div>
                            <div *ngIf="addCorporateForm.controls.phone.errors.minlength">Primary Phone Number must be
                                11 digits</div>
                            <div *ngIf="addCorporateForm.controls.phone.errors.pattern">Primary Phone Number must be
                                Number
                                Only</div>
                        </div>

                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="phone2" class="input-label pull-left">Secondary Phone Number<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger"></sup>
                        </label>
                        <input type="text" formControlName="phone2" class="form-control" id="phone2"
                            placeholder="Secondary Phone Number" maxlength="11"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.phone2.errors }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.phone2.errors" class="text-danger">
                            <div *ngIf="addCorporateForm.controls.phone2.errors.maxlength">Secondary Phone Number must
                                not exceed
                                11 digits</div>
                            <div *ngIf="addCorporateForm.controls.phone2.errors.minlength">Secondary Phone Number must
                                be
                                11 digits</div>
                            <div *ngIf="addCorporateForm.controls.phone2.errors.pattern">Secondary Phone Number must be
                                Number Only</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="emailAddress1" class="input-label pull-left">
                            Primary Email Address
                        </label>
                        <input type="text" formControlName="emailAddress" class="form-control" id="emailAddress"
                            placeholder="Primary Email Address"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.emailAddress.errors }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.emailAddress.errors"
                            class="text-danger">
                            <!-- <div *ngIf="corporateForm.controls.emailAddress.errors.required">Email is required</div> -->
                            <div *ngIf="addCorporateForm.controls.emailAddress.errors.pattern">Primary Email Address
                                must be a valid email
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="emailAddress2" class="input-label pull-left">Secondary Email Address<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger"></sup>
                        </label>
                        <input type="text" formControlName="emailAddress2" class="form-control" id="emailAddress2"
                            placeholder="Secondary Email Address"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.emailAddress2.errors }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.emailAddress2.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.emailAddress2.errors.pattern">Secondary Email Address
                                must be a valid email
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="emailAddress1" class="input-label pull-left">Preferred Tax Office<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select type="text" name="taxOfficeId" formControlName="taxOfficeId" id="taxOfficeId"
                            class="form-control" style="min-width:339px"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.taxOfficeId.errors }">
                            <option value="">Select Tax Office</option>
                            <option *ngFor="let taxTaxOffice of taxTaxOffices" [value]="taxTaxOffice.id">
                                {{ taxTaxOffice.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.taxOfficeId.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.taxOfficeId.errors.required">Preferred Tax Office is
                                required</div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="emailAddress2" class="input-label pull-left">Industry Sector<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select type="text" name="industrySectorId" formControlName="industrySectorId"
                            id="industrySectorId" class="form-control" style="min-width:339px"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.industrySectorId.errors }">
                            <option value="">Select Industry Sector</option>
                            <option *ngFor="let industrySector of industrySectors" [value]="industrySector.id">
                                {{ industrySector.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.industrySectorId.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.industrySectorId.errors.required">Industry Sector is
                                required
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="parentCompanyTaxPayerId">Parent Company Taxpayer ID</label>
                        <input type="text" formControlName="parentCompanyTaxPayerId" class="form-control"
                            placeholder="Parent Company Taxpayer ID" maxlength="11"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.parentCompanyTaxPayerId.errors }" />
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.parentCompanyTaxPayerId.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.parentCompanyTaxPayerId.errors.minlength">Parent
                                Company Taxpayer ID must be at least 11 characters long.</div>
                            <div *ngIf="addCorporateForm.controls.parentCompanyTaxPayerId.errors.maxlength">Parent
                                Company Taxpayer ID must be at most 11 characters long.</div>
                            <div *ngIf="addCorporateForm.controls.parentCompanyTaxPayerId.errors.pattern">Parent Company
                                Taxpayer ID must begin with 3 alphabets</div>
                        </div>
                    </div>

                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="companyTypeId" class="input-label pull-left">Company Type<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select name="companyTypeId" formControlName="companyTypeId" id="companyTypeId"
                            class="form-control" style="min-width:339px"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.companyTypeId.errors }">
                            <option value="">Select Company Type</option>
                            <option *ngFor="let companyType of companyTypes" [value]="companyType.id">
                                {{ companyType.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.companyTypeId.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.companyTypeId.errors.required">Company Type is
                                required</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="localGovernmentId" class="input-label pull-left">Local Government<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select name="localGovernmentId" formControlName="localGovernmentId" id="localGovernmentId"
                            class="form-control" style="min-width:339px"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.localGovernmentId.errors }">
                            <option value="">Select Local Government</option>
                            <option *ngFor="let stateLocalGovt of stateLocalGovts" [value]="stateLocalGovt.lga_code">
                                {{ stateLocalGovt.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.localGovernmentId.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.localGovernmentId.errors.required">Local Government is
                                required</div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="contactAddress" class="input-label pull-left ">Contact Address<sup
                                style="font-weight: 800;" class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <textarea formControlName="contactAddress" class="form-control" id="contactAddress" rows="3"
                            placeholder="Contact Address"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; addCorporateForm.controls.contactAddress.errors }"></textarea>
                        <div *ngIf="submitted &amp;&amp; addCorporateForm.controls.contactAddress.errors"
                            class="text-danger">
                            <div *ngIf="addCorporateForm.controls.contactAddress.errors.required">Contact Address is
                                required</div>
                            <div *ngIf="addCorporateForm.controls.contactAddress.errors.pattern">Only Alphanumeric
                                Characters
                                allowed</div>
                            <div *ngIf="addCorporateForm.controls.contactAddress.errors.minlength">Contact Address
                                cannot
                                contain less than 6 characters</div>
                            <div *ngIf="addCorporateForm.controls.contactAddress.errors.maxlength">Contact Address
                                cannot
                                contain more than 200 characters</div>
                        </div>
                    </div>

                </div>

                <button type="submit" class="btn btn button-login"><i class="fas fa-plus-square"></i> Create
                    Corporate</button>
            </form>
        </div>
    </div>

    <div class="modal-footer-1">
        <div class="note-1 float-left"><strong>** Note:</strong> This field is required as either CAC Number or TIN
            Number
            or you can provide both to proceed further.</div>

        <button type="button" class="btn btn-outline-dark button-login float-right"
            (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #bulkCorporateModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Upload Bulk Corporates</h4>
    </div>

    <div class="modal-body">
        <div class="container">
            <div class="form-row">
                <div class="col-md-12">
                </div>
            </div>

            <form [formGroup]="myForm" (ngSubmit)="submit()">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="fileInput">Select File to Upload</label>

                        <div class="custom-file">
                            <input formControlName="myfile" id="myfile" type="file" class="custom-file-input"
                                (change)="onFileChange($event)"
                                [ngClass]="{ 'is-invalid': submitted && myForm.controls.myfile.errors }"
                                accept=".xls,.xlsx">
                            <label class="custom-file-label" for="customFile">{{filePath == null ? 'Choose file' :
                                filePath}}</label>
                        </div>

                        <div *ngIf="submitted &amp;&amp; f.myfile.touched && f.myfile.invalid" class="text-danger">
                            <div *ngIf="f.myfile.errors.required">File is required.</div>
                        </div>

                    </div>

                </div>

                <button type="submit" class="btn btn button-login" [disabled]="file==null">Upload File</button>
            </form>

            <div class="login-remeber">
                <a href="{{sample_file}}" target="_blank">
                    Download corporate template here</a>
            </div>

        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #linkassetmodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Link Asset</h4>

        <div *ngIf="showSearchAssetButton">
            <button type="button" class="btn btn button-login float-right" style="margin: 10px 0px;"
                (click)="showSearchAssetModal(searchassetmodal)">Search Asset</button>
        </div>
    </div>

    <div class="modal-body">
        <div class="container">
            <form [formGroup]="linkAssetForm" (ngSubmit)="onSubmitLinkAsset(linkAssetForm.value)">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="assetTypeId" class="input-label pull-left">Select Asset Type<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select name="assetTypeId" formControlName="assetTypeId" id="assetTypeId" [attr.disabled]="disableLinkAssetFormControl"
                            class="form-control" #linkAssetTypeSelect (change)="onLinkAssetTypeSelect(linkAssetTypeSelect.value)"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; linkAssetForm.controls.assetTypeId.errors }">
                            <option value="">Select Asset Type</option>
                            <option *ngFor="let assetType of assetTypes" [value]="assetType.id">
                                {{ assetType.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; linkAssetForm.controls.assetTypeId.errors" class="text-danger">
                            <div *ngIf="linkAssetForm.controls.assetTypeId.errors.required">Asset Type is required</div>
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <label for="taxpayerRoleId" class="input-label pull-left">Taxpayer Role<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select name="taxpayerRoleId" formControlName="taxpayerRoleId" id="taxpayerRoleId" [attr.disabled]="disableLinkAssetFormControl"
                            class="form-control" #linkTaxpayerRoleSelect (change)="onLinkTaxpayerRoleSelect(linkTaxpayerRoleSelect.value)"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; linkAssetForm.controls.taxpayerRoleId.errors }">
                            <option value="">Select Taxpayer Role</option>
                            <option *ngFor="let taxpayerRole of taxpayerRoles" [value]="taxpayerRole?.id">
                                {{ taxpayerRole?.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; linkAssetForm.controls.taxpayerRoleId.errors" class="text-danger">
                            <div *ngIf="linkAssetForm.controls.taxpayerRoleId.errors.required">Taxpayer Role is required
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="assetName" class="input-label pull-left">Asset Name<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="assetName" class="form-control" id="assetName"
                            placeholder="Asset Name" [attr.disabled]="true"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; linkAssetForm.controls.assetName.errors }" />
                        <div *ngIf="submitted &amp;&amp; linkAssetForm.controls.assetName.errors" class="text-danger">
                            <div *ngIf="linkAssetForm.controls.assetName.errors.required">Asset Name is required, use the 'Search Asset' button
                            </div>
                        </div>
                    </div>

                </div>

                <button type="submit" class="btn btn button-login">
                    Link Asset
                </button>

            </form>
        </div>
    </div>

    <div class="modal-footer-1">
        <div class="note-1 float-left">
            <span>
                <strong>** Note:</strong> Select 'Asset Type' to search for assets.
            </span>
        </div>

        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #createassetmodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Add New Asset</h4>
    </div>

    <div class="modal-body">
        <div class="container">
            <form [formGroup]="assetTypeForm">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="assetTypeId" class="input-label pull-left">Select Asset Type<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <select type="text" name="assetTypeId" formControlName="assetTypeId" id="assetTypeId" [attr.disabled]="true"
                            #selectAssetType (change)="onAssetTypeChange(selectAssetType.value)" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; assetTypeForm.controls.assetTypeId.errors }">
                            <option value="">Select Asset Type</option>
                            <option *ngFor="let assetType of assetTypes" [value]="assetType.id">
                                {{ assetType.name }}
                            </option>
                        </select>
                        <div *ngIf="submitted &amp;&amp; assetTypeForm.controls.assetTypeId.errors" class="text-danger">
                            <div *ngIf="assetTypeForm.controls.assetTypeId.errors.required">Asset Type is required</div>
                        </div>
                    </div>

                </div>

            </form>
        </div>
    </div>

    <div style="min-height: 200px;">
        <app-addbusiness *ngIf="businessAsset" [modalRef]="assessmentModalRef" [showHeader]="true" (reloadAssetList)="getUpdatedLinkedAssets($event)"
            [businessId]="null" [corporateId]="selectedCorporateId" [showSaveButton]="true"></app-addbusiness>

        <app-addland *ngIf="landAsset" [modalRef]="assessmentModalRef" [landId]="null" [showHeader]="true" (reloadAssetList)="getUpdatedLinkedAssets($event)"
            [corporateId]="selectedCorporateId" [showSaveButton]="true"></app-addland>

        <app-addbuilding *ngIf="buildingAsset" [modalRef]="assessmentModalRef" [buildingId]="null" (reloadAssetList)="getUpdatedLinkedAssets($event)"
            [corporateId]="selectedCorporateId" [showSaveButton]="true" [showHeader]="true"></app-addbuilding>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #searchassetmodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Search Asset</h4>

        <div *ngIf="showLinkedAssetButton">
            <button *ngIf="showCreateAssetButton" type="button" class="btn btn button-login float-right" style="margin: 10px 10px;"
                (click)="showCreateAssessmentModal(createassetmodal)">Create Asset</button>
        </div>    
    </div>

    <div class="modal-body">
        <div class="container">
            <form [formGroup]="searchAssetForm" (ngSubmit)="onSubmitSearchAsset(searchAssetForm.value)">
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="assetName" class="input-label pull-left">Asset Name<sup
                                class=" font-wegiht-bold text-danger">*</sup>
                        </label>
                        <input type="text" formControlName="assetName" class="form-control" id="assetName"
                            placeholder="Asset Name" maxlength="40"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; searchAssetForm.controls.assetName.errors }" />
                        <div *ngIf="submitted &amp;&amp; searchAssetForm.controls.assetName.errors" class="text-danger">
                            <div *ngIf="searchAssetForm.controls.assetName.errors.required">Asset Name is required
                            </div>
                            <div *ngIf="searchAssetForm.controls.assetName.errors.pattern">Only Alphanumeric
                                Characters
                                allowed</div>
                            <div *ngIf="searchAssetForm.controls.assetName.errors.minlength">Asset Name
                                cannot be less than 3 characters</div>
                            <div *ngIf="searchAssetForm.controls.assetName.errors.maxlength">Asset Name can not
                                exceed
                                40 characters</div>
                        </div>
                    </div>

                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <button type="submit" class="btn btn button-login">
                            Search Asset
                        </button>
                    </div>
                </div>

            </form>
        </div>

        <div class="container">
            <div *ngIf="businessData.length > 0;">
                <h6 class="text-center">LIST OF BUSINESSES</h6>
                <table class="table table-bordered table-condensed" datatable *ngIf="businessData;"
                    [dtOptions]="dtOptionsPopUp" width="100%">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Business ID</th>
                            <th>Business Name</th>
                            <th>Indusstry Sector</th>
                            <th>Indusstry Sub Sector</th>                        
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mydata of businessData; index as i">
                            <td>{{ i + 1 }}</td>
                            <td>{{ mydata.business_id }}</td>
                            <td>{{ mydata.business_name }}</td>
    
                            <td>{{ mydata.industry_sector_name }}</td>
                            <td>{{ mydata.industry_subsector_name }}</td>                        
                            <td>
                                <button class="btn btn-sm btn-outline-primary" (click)="selectBusiness(mydata)">
                                    Select</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
           
            <div *ngIf="landData.length > 0;">
                <h6 class="text-center">LIST OF LANDS</h6>
                <table class="table table-bordered table-condensed" datatable *ngIf="landData;"
                    [dtOptions]="dtOptionsPopUp" width="100%">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Land ID</th>
                            <th>Land Name</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mydata of landData; index as i">
                            <td>{{ i + 1 }}</td>
                            <td>{{ mydata.land_id }}</td>
                            <td>{{ mydata.land_name }}</td>                                              
                            <td>
                                <button class="btn btn-sm btn-outline-primary" (click)="selectLand(mydata)">
                                    Select</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div *ngIf="buildingData.length > 0;">
                <h6 class="text-center">LIST OF BUILDINGS</h6>
                <table class="table table-bordered table-condensed" datatable *ngIf="buildingData;"
                    [dtOptions]="dtOptionsPopUp" width="100%">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Building ID</th>
                            <th>Building Name</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mydata of buildingData; index as i">
                            <td>{{ i + 1 }}</td>
                            <td>{{ mydata.building_id }}</td>
                            <td>{{ mydata.building_name }}</td>                                              
                            <td>
                                <button class="btn btn-sm btn-outline-primary" (click)="selectBuilding(mydata)">
                                    Select</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>

<ng-template #viewassetmodal let-modal>
    <app-addbusiness *ngIf="businessAsset" [modalRef]="assessmentModalRef" [showHeader]="true"
        [businessId]="selectedBusinessId" [corporateId]="selectedCorporateId" [showSaveButton]="false"></app-addbusiness>

    <app-addland *ngIf="landAsset" [modalRef]="assessmentModalRef" [landId]="selectedLandId" [showHeader]="true"
        [corporateId]="selectedCorporateId" [showSaveButton]="false"></app-addland>

    <app-addbuilding *ngIf="buildingAsset" [modalRef]="assessmentModalRef" [buildingId]="selectedBuildingId" [showHeader]="true"
        [corporateId]="selectedCorporateId" [showSaveButton]="false"></app-addbuilding>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>